<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>New Market - v1.6.7-STABLE</title>
    
    <meta property="og:title" content="New Market - Gest√£o de Validades">
    <meta property="og:description" content="Sistema inteligente para controle de estoque e alertas de vencimento.">
    <meta name="theme-color" content="#001e3c">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    
    <style>
        /* Developed by: Pkacci ¬© 2026 */
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; -webkit-font-smoothing: antialiased; user-select: none; }
        body { font-family: sans-serif; background-color: #020617; color: #f8fafc; overflow-x: hidden; margin: 0; }
        .hidden-app { display: none !important; }
        .input-dark { background: #1e293b; border: 2px solid #334155; color: white; padding: 1rem; border-radius: 1rem; text-align: center; font-size: 1.5rem; outline: none; width: 100%; user-select: text; }
        .bg-maintenance { background: repeating-linear-gradient(45deg, #020617, #020617 10px, #0f172a 10px, #0f172a 20px); }
        .card-produto { background: #0f172a; border: 1px solid #1e293b; border-radius: 1.5rem; transition: all 0.2s; }
        
        .signature-shimmer {
            animation: shimmer-effect 4s ease-in-out infinite;
            background: linear-gradient(90deg, #334155, #f8fafc, #334155);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            text-transform: uppercase;
        }
        @keyframes shimmer-effect {
            0% { background-position: 0% center; opacity: 0.3; }
            50% { background-position: 100% center; opacity: 0.7; }
            100% { background-position: 0% center; opacity: 0.3; }
        }

        .pulse-relatado { border: 2px solid #22c55e !important; animation: pulse-green 2s infinite; }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        .status-pulse { position: relative; width: 10px; height: 10px; background-color: #22c55e; border-radius: 50%; }
        .status-pulse::after { content: ''; position: absolute; width: 100%; height: 100%; background-color: #22c55e; border-radius: 50%; z-index: -1; animation: pulse-ring 2s infinite; }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 0.7; } 100% { transform: scale(3); opacity: 0; } }
        .check-in-input { width: 26px; height: 26px; border-radius: 50%; border: 2px solid #334155; appearance: none; -webkit-appearance: none; outline: none; background: #020617; }
        .check-in-input:checked { background: #FFD700; border-color: #FFD700; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E"); background-size: contain; }
        .btn-touch { min-width: 44px; min-height: 44px; display: flex; align-items: center; justify-content: center; }
        .modal-shadow { background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(10px); }
        .toggle-filtro-ativo { background: #FFD700 !important; color: #020617 !important; border-color: #FFD700 !important; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="maintenanceView" class="hidden-app fixed inset-0 bg-maintenance z-[200] flex items-center justify-center p-6 text-center">
        <div class="bg-slate-900 border-2 border-yellow-500 p-8 rounded-[3rem] max-w-sm">
            <div class="text-5xl mb-4">‚öôÔ∏è</div>
            <div id="timer-display" class="text-4xl font-mono font-black text-yellow-500 mb-2">15:00</div>
            <h2 class="text-2xl font-black text-yellow-500 uppercase italic">Atualiza√ß√£o</h2>
            <button onclick="irParaLoginDesdeManutencao()" class="mt-8 w-full py-4 bg-yellow-500 text-slate-900 rounded-2xl font-black uppercase text-[11px]">Acesso Admin</button>
        </div>
    </div>

    <div id="loginView" class="hidden-app fixed inset-0 bg-[#020617] z-[100] flex items-center justify-center p-6 text-center">
        <div class="bg-slate-900 w-full max-w-sm rounded-[3rem] p-8 border border-slate-800 flex flex-col min-h-[550px]">
            <div id="login-content" class="flex-grow">
                <div class="w-16 h-16 bg-[#003366] rounded-2xl flex items-center justify-center mx-auto mb-6 text-[#FFD700] text-2xl font-black italic">NM</div>
                <h2 id="login-title" class="text-xl font-black uppercase italic mb-8 text-slate-100">Equipe New Market</h2>
                <div id="auth-container"></div>
            </div>
            <p onclick="toggleManutencaoSecreto()" class="signature-shimmer mt-6 text-[10px] tracking-[0.3em]">Pkacci ¬© 2026</p>
        </div>
    </div>

    <div id="appView" class="hidden-app">
        <header class="bg-[#001e3c] p-6 sticky top-0 z-30 shadow-2xl rounded-b-[2.5rem] border-b-2 border-[#FFD700]">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-3">
                    <div class="status-pulse"></div>
                    <div>
                        <h1 class="font-black text-2xl italic text-[#FFD700] uppercase leading-none">New Market</h1>
                        <p class="signature-shimmer mt-1 text-[8px] tracking-[0.2em]">Pkacci ¬© 2026</p>
                    </div>
                </div>
                <button onclick="logout()" class="bg-slate-800/50 p-3 rounded-xl text-xl btn-touch">üö™</button>
            </div>
            
            <p id="user-display" class="text-[9px] font-black uppercase text-slate-400 mb-4 tracking-widest"></p>

            <input type="text" id="input-busca" oninput="renderizar()" placeholder="PESQUISAR PRODUTO OU COD..." class="w-full bg-slate-900 p-4 rounded-xl text-xs font-black uppercase border border-slate-700 text-slate-200 mb-4 outline-none">
            
            <div class="flex gap-2">
                <button onclick="enviarRelatorioWhatsApp()" class="flex-grow bg-green-600 text-white py-3 rounded-xl font-black text-[9px] uppercase italic">Relat√≥rio WhatsApp</button>
                <div id="container-filtro-lideranca" class="hidden flex gap-2">
                    <button id="btn-meus-itens" onclick="toggleFiltroOperador()" class="bg-slate-800 text-slate-300 px-4 py-3 rounded-xl font-black text-[9px] uppercase border border-slate-700">Meus Itens</button>
                </div>
                <button onclick="checkInTodos()" class="bg-slate-800 text-slate-300 px-4 py-3 rounded-xl font-black text-[9px] uppercase">Selecionar Tudo</button>
            </div>
        </header>

        <main class="max-w-lg mx-auto p-5">
            <div id="admin-tools" class="hidden mb-4 space-y-2">
                <div id="view-paulo-exclusiva" class="hidden">
                    <button onclick="abrirModalLogs()" class="w-full py-3 bg-indigo-900/40 border border-indigo-800 rounded-xl text-[9px] font-black uppercase text-indigo-400">üìä Hist√≥rico de Acessos Equipe</button>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-2 mb-4 text-center">
                <div onclick="setFiltro('vencidos')" class="bg-red-900/40 p-3 rounded-2xl text-red-400 border border-red-500/30 transition-all duration-300 transform">
                    <p class="text-[8px] font-black uppercase mb-1">Vencidos</p>
                    <p id="dash-vencidos" class="text-xl font-black leading-none">0</p>
                </div>
                <div onclick="setFiltro('urgente')" class="bg-yellow-900/40 p-3 rounded-2xl text-yellow-400 border border-yellow-500/30 transition-all duration-300 transform">
                    <p class="text-[8px] font-black uppercase mb-1">Alerta</p>
                    <p id="dash-alerta" class="text-xl font-black leading-none">0</p>
                </div>
                <div onclick="setFiltro('todos')" class="bg-slate-800 p-3 rounded-2xl text-slate-100 border border-slate-700 transition-all duration-300 transform">
                    <p class="text-[8px] font-black uppercase mb-1">Total</p>
                    <p id="dash-total" class="text-xl font-black leading-none">0</p>
                </div>
            </div>

            <div class="bg-[#0f172a] border border-slate-800 rounded-3xl p-5 mb-6">
                <h3 class="text-[10px] font-black uppercase text-slate-500 mb-3 tracking-widest flex items-center gap-2">
                    <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span> Previs√£o de Perdas (Itens)
                </h3>
                <div class="grid grid-cols-3 gap-4">
                    <div class="text-center"><p class="text-[9px] font-black text-slate-400 uppercase">15 Dias</p><p id="risco-15" class="text-lg font-black text-orange-400">0</p></div>
                    <div class="text-center border-x border-slate-800"><p class="text-[9px] font-black text-slate-400 uppercase">30 Dias</p><p id="risco-30" class="text-lg font-black text-blue-400">0</p></div>
                    <div class="text-center"><p class="text-[9px] font-black text-slate-400 uppercase">60 Dias</p><p id="risco-60" class="text-lg font-black text-slate-100">0</p></div>
                </div>
            </div>

            <div id="container-produtos" class="space-y-4"></div>
            
            <footer class="w-full py-16 pb-44 text-center">
                <p class="signature-shimmer text-[10px] tracking-[0.3em]">Pkacci ¬© 2026</p>
            </footer>
        </main>

        <div class="fixed bottom-8 left-0 right-0 px-10 z-40">
            <button onclick="abrirCadastro()" class="w-full bg-[#FFD700] text-slate-950 py-5 rounded-2xl shadow-xl font-black text-xs uppercase">+ NOVO / SCANNER</button>
        </div>
    </div>

    <script>
        // Configura√ß√µes e L√≥gica Firebase preservadas...
        const EQUIPE = [ 
            { nome: "ADRIANO", pass: "YWRtaW4xMjM=", cargo: "GERENTE" }, 
            { nome: "ADRIELLE", pass: "YWRtaW4xMjM=", cargo: "GERENTE" }, 
            { nome: "PAULO", pass: "cGF1bG8xMjM=", cargo: "DESENVOLVEDOR" }, 
            { nome: "ANA CLAUDIA", pass: "YW5hY2xhdWRpYTEyMw==", cargo: "EQUIPE" }, 
            { nome: "PEDRO", pass: "cGVkcm8xMjM=", cargo: "EQUIPE" }, 
            { nome: "LEANDRO", pass: "bGVhbmRybzEyMw==", cargo: "EQUIPE" }, 
            { nome: "EDMAR", pass: "ZWRmYXIxMjM=", cargo: "EQUIPE" }, 
            { nome: "JO√ÉO", pass: "am9hbzEyMw==", cargo: "EQUIPE" }, 
            { nome: "TAMIRIS", pass: "ZGFtaXJpczEyMw==", cargo: "EQUIPE" } 
        ];
        // Restante do c√≥digo funcional...
    </script>
</body>
</html>
